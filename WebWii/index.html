<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebWii - Web-Based Wii Emulator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
     <!-- Disclaimer Modal -->
    <div id="wii-disclaimer-modal" class="wii-warning-screen" style="display: none;">
        <div class="wii-warning-content">
            <h1>‚ö† WARNING - HEALTH AND SAFETY</h1>
            <p>Before using this software, read the Operations Manual for important information about health and safety.</p>
            <div class="warning-text">
                <p>WebWii is experimental software.</p>
                <p>Please acknowledge the following:</p>
                <ul>
                    <li>This software is provided as-is without warranty</li>
                    <li>NAND modifications may cause data loss</li>
                    <li>‚ö†‚ö†ONLY USE LEGALLY OBTAINED SOFTWARE‚ö†‚ö† The WebWii team DOES NOT</br>CONDONE PIRACY! Use your legal dumps!</li>
                    <li>This is a fan project not affiliated with Nintendo</li>
                </ul>
            </div>
            <p class="continue-text">Left Click/Tap to continue</p>
        </div>
    </div>

    <!-- Audio for click sound -->
    <audio id="wii-click-sound" preload="auto">
        <source src="../assets/wiiclick.wav" type="audio/wav">
    </audio>

    <!-- Main Content -->
    <div class="container">
        <header class="wii-header">
            <h1>WebWii</h1>
            <p class="subtitle">Web-Based Wii Emulator</p>
        </header>

        <!-- Emulator Section -->
        <section class="feature-section emulator-section">
            <h2>üéÆ Emulator</h2>
            <p class="section-description">RetroArch-powered Wii emulation</p>
            
            <div id="emulator-container" style="display: none;">
                <canvas id="canvas" tabindex="1"></canvas>
                <div class="emulator-controls">
                    <button id="fullscreen-btn" class="wii-button">Fullscreen</button>
                    <button id="pause-btn" class="wii-button">Pause</button>
                    <button id="reset-btn" class="wii-button">Reset</button>
                </div>
                <div id="emulator-status" class="status-message"></div>
            </div>

            <div id="emulator-placeholder" class="emulator-placeholder">
                <p>üéÆ Load a game file to start emulation</p>
                <p class="emulator-hint">Upload WAD/DOL files above or load ROM files here</p>
                <input type="file" id="rom-input" accept=".wad,.dol,.iso,.wbfs" style="display: none;">
                <button onclick="document.getElementById('rom-input').click()" class="wii-button">
                    Select ROM File
                </button>
            </div>
        </section>

        <!-- WAD/DOL File Section -->
        <section class="feature-section">
            <h2>üì¶ WAD/DOL File Import</h2>
            <p class="section-description">Import homebrew applications and install to virtual NAND</p>
            
            <div class="file-upload-area">
                <input type="file" id="wad-dol-input" accept=".wad,.dol" style="display: none;">
                <button onclick="document.getElementById('wad-dol-input').click()" class="wii-button">
                    Select WAD/DOL File
                </button>
                <div id="wad-dol-status" class="status-message"></div>
                <div id="wad-dol-progress" class="progress-bar" style="display: none;">
                    <div class="progress-fill"></div>
                </div>
            </div>

            <div id="wad-dol-info" class="file-info" style="display: none;">
                <h3>File Information</h3>
                <div id="wad-dol-details"></div>
                <button id="install-wad-dol" class="wii-button install-button" style="display: none;">
                    Install to NAND
                </button>
            </div>
        </section>

        <!-- BootMii Backup Section -->
        <section class="feature-section">
            <h2>üíæ BootMii NAND Backup Import</h2>
            <p class="section-description">Import and restore BootMii NAND backups (nand.bin)</p>
            
            <div class="file-upload-area">
                <input type="file" id="bootmii-input" accept=".bin" style="display: none;">
                <button onclick="document.getElementById('bootmii-input').click()" class="wii-button">
                    Select BootMii Backup
                </button>
                <div id="bootmii-status" class="status-message"></div>
                <div id="bootmii-progress" class="progress-bar" style="display: none;">
                    <div class="progress-fill"></div>
                </div>
            </div>

            <div id="bootmii-info" class="file-info" style="display: none;">
                <h3>Backup Information</h3>
                <div id="bootmii-details"></div>
                <button id="restore-bootmii" class="wii-button install-button" style="display: none;">
                    Restore Backup
                </button>
            </div>
        </section>

        <!-- Warning Modal for NAND Operations -->
        <div id="nand-warning-modal" class="modal-overlay" style="display: none;">
            <div class="warning-content">
                <h2>‚ö†Ô∏è NAND Operation Warning</h2>
                <p id="warning-message"></p>
                <div class="warning-buttons">
                    <button id="confirm-nand-operation" class="wii-button confirm-button">Proceed</button>
                    <button id="cancel-nand-operation" class="wii-button cancel-button">Cancel</button>
                </div>
            </div>
        </div>

        <footer class="wii-footer">
            <p>WebWii is a fan project not affiliated with Nintendo. Use responsibly.</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="utils.js"></script>
    <script src="disclaimer.js"></script>
    <script src="emulator.js"></script>
    <script src="wad-handler.js"></script>
    <script src="bootmii-import.js"></script>
    
    <!-- RetroArch Integration -->
    <!-- Note: Loading from CDN for latest version. For production, consider hosting locally with SRI validation -->
    <script async src="https://web.libretro.com/assets/frontend/bundle/libretro.js"></script>
</body>
</html>
