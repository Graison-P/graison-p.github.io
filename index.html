<script>
const updateFavicon = () => {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  const favicon = document.getElementById('favicon');
  const spritesheet = new Image();

  // Spritesheet dimensions
  const frameSize = 32;
  const framesPerRow = 5;
  const totalFrames = 30;
  let currentFrame = 0;

  canvas.width = frameSize;
  canvas.height = frameSize;
  spritesheet.src = 'faviconsheet.png';

  spritesheet.onload = () => {
    setInterval(() => {
      const row = Math.floor(currentFrame / framesPerRow);
      const col = currentFrame % framesPerRow;
      ctx.clearRect(0, 0, frameSize, frameSize);
      ctx.drawImage(
        spritesheet,
        col * frameSize, // x position in spritesheet
        row * frameSize, // y position in spritesheet
        frameSize,
        frameSize,
        0,
        0,
        frameSize,
        frameSize
      );
      favicon.href = canvas.toDataURL('image/png');
      currentFrame = (currentFrame + 1) % totalFrames;
    }, 70);
  };
};

updateFavicon();

// Custom tagline logic
const taglines = [
  "REALITY IS AN ILLUSION BUY GOLD INVEST IN CRYPTO BYEEEEEEEEE!!!!!!!!",
  "Did anyone happen to kill a red webmaster on the way? No? Then we still got a problem.",
  "[[Hyperlink Blocked]]",
  "what is a google?",
  "goobe how do i turn on my phone",
  "gmail.com my grandson Nathan",
  "Making my money dissapear since- aw crap i forgot",
  "BLYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA-",
  "oh cholera, czy to freddy fazbear?",
  "Ye- the kitty flew, away-",
  "This load failed to site- DAMN IT!",
  "'babulbublida' - The Roblox prison break obby guy",
  "And now, a story in emojis:</br> ðŸ˜ŽðŸ›»ðŸ˜±ðŸš‘ðŸ‘»",
  "Kyle - Cute - Nice - <b><i>DEAD</i></b>"
];

const oneInAMillion = Math.random() * 1000000 < 1;

if (oneInAMillion) {
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('.site-tagline').innerHTML = "Hey?! Where's my CSS?!";
    const stylesheet = document.querySelector('link[rel=stylesheet]');
    if (stylesheet) stylesheet.disabled = true;
  });
} else {
  const selectedTagline = taglines[Math.floor(Math.random() * taglines.length)];
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('.site-tagline').innerHTML = selectedTagline;
  });
}
</script>
