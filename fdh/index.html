<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" id="favicon" href="favicon.ico" type="image/ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Frillion Dollar Homepage</title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        :root { 
            --xp-blue: #0055e5; 
            --xp-beige: #ece9d8;
            --logo-grey: #666666; 
            --neon: #0f0; 
        }
        
        body { 
            background-color: var(--logo-grey); 
            margin: 0; padding: 0;
            display: flex; flex-direction: column; align-items: center;
            font-family: "Tahoma", sans-serif;
            overflow-x: hidden;
        }

        /* --- TV WORLD REVEAL --- */
        #tv-reveal {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #000; z-index: 9999;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            opacity: 1; transition: opacity 3s ease;
        }
        #welcome-msg {
            color: white; font-family: "Bauhaus 93", sans-serif;
            font-size: 2.2rem; margin-top: 25px; opacity: 0;
            transition: opacity 2s ease; text-align: center;
        }
        #reveal-logo { width: 85%; max-width: 650px; opacity: 0; transition: opacity 2.5s ease; }

        /* --- SHUTTER OVERLAY --- */
        #launch-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0, 0, 0, 0.85); z-index: 5000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: var(--neon); transition: opacity 2s ease, visibility 2s;
        }
        .timer-box {
            background: rgba(0, 40, 0, 0.7); border: 2px solid #005500;
            border-radius: 12px; padding: 30px; text-align: center;
        }
        #timer { font-size: 5rem; font-family: "Bauhaus 93", sans-serif; line-height: 1; cursor: pointer; user-select: none; }

        /* --- GRID --- */
        .grid-container {
            width: 1000px; height: 1000px; background: #fff; border: 2px solid #000;
            position: relative; margin: 20px 0 50px 0;
            display: grid; grid-template-columns: repeat(100, 10px);
            grid-template-rows: repeat(100, 10px);
            background-image: linear-gradient(#eee 1px, transparent 1px), linear-gradient(90deg, #eee 1px, transparent 1px);
            background-size: 10px 10px;
        }
        .pixel { width: 10px; height: 10px; cursor: crosshair; }
        .pixel:hover { background: rgba(0, 85, 229, 0.3); }

        /* --- DA FORM (XP STYLE) --- */
        #claim-modal {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); z-index: 6000;
            width: 320px; background: var(--xp-beige); border: 3px solid var(--xp-blue);
            box-shadow: 6px 6px 0px rgba(0,0,0,0.4);
        }
        .xp-header {
            background: linear-gradient(180deg, #0058e6 0%, #3a93ff 10%, #0058e6 100%);
            color: white; padding: 4px 10px; font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
        }
        .xp-body { padding: 15px; }
        .xp-label { font-size: 11px; font-weight: bold; display: block; margin-bottom: 2px; color: #000; }
        .xp-input { width: 100%; margin-bottom: 12px; border: 2px inset #fff; box-sizing: border-box; padding: 3px; }

        body.is-you #launch-overlay { opacity: 0; visibility: hidden; pointer-events: none; }
        .sub-link { color: var(--neon); text-decoration: underline; cursor: pointer; font-weight: bold; margin-top: 10px; }
        .infotext { color: var(--neon;) }
    </style>
</head>
<body>

    <div id="tv-reveal">
        <img src="tfdhlgo.gif" id="reveal-logo" alt="Logo">
        <div id="welcome-msg">WELCOME TO THE<br>FRILLION DOLLAR HOMEPAGE</div>
    </div>

    <div id="launch-overlay">
        <div class="timer-box">
            <div id="timer">00:00:00</div>
        </div>
    </div>

    <header><img src="tfdhlgo.gif" alt="Logo" style="margin:20px 0; max-width:90vw;"></header>
    <p class="infotext">To submit a ad on a pixel, click the pixel you want, or click below to:</p>
    <div class="sub-link" onclick="openDAFORM(0,0)">[ SUBMIT PIXELS VIA DA FORM ]</div>
    <div class="sub-link" onclick="openDARULES()">[ READ DA RULES ]</div>
    
    <div style="width: 100vw; overflow-x: auto; display: flex; justify-content: center;">
        <div class="grid-container" id="main-grid"></div>
    </div>

    <div id="claim-modal">
        <div class="xp-header">
            <span>DA FORM</span>
            <div style="cursor:pointer; background:#e04343; padding:2px 8px; border:1px solid #fff; font-size: 12px;" onclick="closeXP()">X</div>
        </div>
        <div class="xp-body">
            <form action="https://formspree.io/f/xzdarbbb" method="POST">
                <span class="xp-label">YA NAME</span>
                <input type="text" name="name" class="xp-input" required>
                <span class="xp-label">YA EMAIL</span>
                <input type="email" name="email" class="xp-input" required>
                <span class="xp-label">YA IMAGE URL</span>
                <input type="text" name="img" class="xp-input" required>
                <span class="xp-label">YA WEBSITE</span>
                <input type="text" name="site" class="xp-input" required>
                <input type="hidden" name="coords" id="form-coords">

                <div class="g-recaptcha" data-sitekey="6Le9HGssAAAAAE2etRyjrm4I65gIGND8NbggJgcI" style="transform:scale(0.85);transform-origin:0 0;"></div>

                <div style="text-align: right; margin-top: 10px;">
                    <button type="submit" style="background:#eee; border:1px solid #777; padding:2px 10px; font-weight:bold; cursor: pointer;">OK</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
    const BYPASS_KEY = "missouri";
    let clickCount = 0;
    
    // Check if they've been here before
    let hasSeenIntro = localStorage.getItem('seen_intro') === 'true';

    const loadSfx = (src) => { 
        const a = new Audio(src); 
        a.preload = "auto"; 
        return a; 
    };

    const erroSfx = loadSfx('erro.mp3'); 
    const buildSfx = loadSfx('build.mp3');   
    const themeSfx = loadSfx('theme.mp3');   

    const grid = document.getElementById('main-grid');
    
    function generateMillionPixels() {
        const fragment = document.createDocumentFragment();
        for (let i = 0; i < 1000000; i++) {
            const pixel = document.createElement('div');
            pixel.className = 'pixel';
            const x = (i % 1000);
            const y = Math.floor(i / 1000);
            pixel.onclick = () => openDAFORM(x, y);
            fragment.appendChild(pixel);
        }
        grid.appendChild(fragment);
    }

    // This handles the first-time sequence
    function triggerTVWorld() {
        const overlay = document.getElementById('tv-reveal');
        overlay.style.display = 'flex';
        
        // Step 1: Build music
        buildSfx.play().catch(e => console.log("Interaction required for audio"));
        
        setTimeout(() => {
            // Step 2: Logo and Message fade in
            document.getElementById('reveal-logo').style.opacity = '1';
            document.getElementById('welcome-msg').style.opacity = '1';
            
            // Step 3: Delphian's TV World Theme starts
            themeSfx.play().catch(e => console.log("Theme audio blocked"));
            
            setTimeout(() => {
                // Step 4: Fade out and reveal the grid
                overlay.style.opacity = '0';
                setTimeout(() => { 
                    overlay.style.display = 'none'; 
                    document.body.classList.add('is-you'); // Enable interaction
                }, 3000);
                
                // Set the "seen" flag so they don't see it again
                localStorage.setItem('seen_intro', 'true');
            }, 8000); 
        }, 2000);
    }

    function initPage() {
        const launchOverlay = document.getElementById('launch-overlay');
        
        if (!hasSeenIntro) {
            // New visitor: Show the intro
            triggerTVWorld();
            if(launchOverlay) launchOverlay.style.display = 'none';
        } else {
            // Returning visitor: Go straight to the grid
            document.body.classList.add('is-you');
            if(launchOverlay) launchOverlay.style.display = 'none';
            document.getElementById('tv-reveal').style.display = 'none';
        }
    }

    function openDAFORM(x, y) {
        if(!document.body.classList.contains('is-you')) return;
        erroSfx.play().catch(() => {});
        document.getElementById('form-coords').value = x + ", " + y;
        document.getElementById('claim-modal').style.display = 'block';
    }
    
    function closeXP() { document.getElementById('claim-modal').style.display = 'none'; }
    function openDARULES() { window.open('https://graison-p.is-a.dev/fdh/darules', '_blank'); }

    // Start everything
    generateMillionPixels();
    initPage();
</script>


</body>
</html>    
