<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV World Demo | PS4 Fix</title>
    <style>
        body { background: #666666; color: #0f0; font-family: sans-serif; text-align: center; margin: 0; overflow: hidden; }
        
        #tv-reveal {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: #000; z-index: 9999;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            opacity: 1; transition: opacity 3s ease;
        }

        #reveal-logo { width: 80%; max-width: 500px; opacity: 0; transition: opacity 2.5s ease; }
        
        #welcome-msg {
            color: white; font-size: 2rem; margin-top: 20px; opacity: 0;
            transition: opacity 2s ease; font-family: "Bauhaus 93", Arial;
        }

        .demo-btn {
            margin-top: 45vh; padding: 20px; font-size: 1.5rem;
            background: #0f0; color: #000; border: none; cursor: pointer;
            font-weight: bold; border-radius: 10px; box-shadow: 0 0 20px #0f0;
        }
    </style>
</head>
<body>

    <button id="start-btn" class="demo-btn" onclick="startDemo()">INTERACT TO START REVEAL</button>

    <div id="tv-reveal">
        <img src="tfdhlgo.gif" id="reveal-logo" alt="Logo">
        <div id="welcome-msg">WELCOME TO THE<br>FRILLION DOLLAR HOMEPAGE</div>
    </div>

   <script>
    const buildSfx = new Audio('build.mp3');
    const themeSfx = new Audio('theme.mp3');

    function startDemo() {
        const btn = document.getElementById('start-btn');
        const overlay = document.getElementById('tv-reveal');
        const logo = document.getElementById('reveal-logo');
        const msg = document.getElementById('welcome-msg');

        // 1. FORCED UNLOCK: Play both immediately
        // We play themeSfx at 0 volume so the browser marks it as "active"
        themeSfx.volume = 0;
        themeSfx.play().then(() => {
            themeSfx.pause();
            themeSfx.currentTime = 0;
            themeSfx.volume = 1; // Reset volume for later
        });

        buildSfx.play().then(() => {
            // Success! Build is playing.
            btn.style.display = 'none';
            overlay.style.display = 'flex';
        }).catch(e => {
            alert("Device blocked audio. Try clicking again.");
        });

        // 2. THE TRANSITION
        // Instead of waiting for 'onended', we trigger the reveal 
        // a split second before the build ends (e.g., 6 seconds)
        // ADJUST 6000 to the exact length of your build.mp3 in milliseconds
        setTimeout(() => {
            logo.style.opacity = '1';
            msg.style.opacity = '1';
            
            themeSfx.play();
            
            // 3. EXIT SEQUENCE
            setTimeout(() => {
                overlay.style.opacity = '0';
                setTimeout(() => { 
                    overlay.style.display = 'none'; 
                }, 3000);
            }, 8000); 
        }, 6000); 
    }
</script>

</body>
</html>
